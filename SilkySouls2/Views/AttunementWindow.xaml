<Window x:Class="SilkySouls2.Views.AttunementWindow"
       xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
       xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
       xmlns:mc="http://schemas.openxmlformats.org/markup-compatibility/2006"
       xmlns:d="http://schemas.microsoft.com/expression/blend/2008"
       xmlns:converters="clr-namespace:SilkySouls2.Converters"
       Style="{StaticResource DefaultWindowStyle}"
       mc:Ignorable="d"
       Title="AttunementWindow" Height="450" Width="800">
    <Window.Resources>
        <converters:BoolToBorderBrushConverter x:Key="BoolToBorderBrushConverter" />
        <converters:SpellIdToVisibilityConverter x:Key="SpellIdToVisibilityConverter" />
    </Window.Resources>
    <Grid>
       <Grid.RowDefinitions>
           <RowDefinition Height="Auto" />
           <RowDefinition Height="*" />
       </Grid.RowDefinitions>
       
       <ItemsControl Grid.Row="0" ItemsSource="{Binding EquippedSpells}" Margin="10">
           <ItemsControl.ItemsPanel>
               <ItemsPanelTemplate>
                   <UniformGrid Columns="7" Rows="2" />
               </ItemsPanelTemplate>
           </ItemsControl.ItemsPanel>
           <ItemsControl.ItemTemplate>
               <DataTemplate>
                   <Border BorderBrush="Gray" BorderThickness="1" Margin="2" Height="60" Width="80">
                       <Grid>
                           <TextBlock Text="{Binding Name}" 
                                      HorizontalAlignment="Center" 
                                      VerticalAlignment="Center" 
                                      TextAlignment="Center" 
                                      TextWrapping="Wrap"/>
                           <TextBlock Text="✕" Width="18" Height="18" FontSize="11"
                                   HorizontalAlignment="Right" VerticalAlignment="Top"
                                   Background="Transparent"
                                   Foreground="#FF0000" Cursor="Hand"
                                   Visibility="{Binding Id, Converter={StaticResource SpellIdToVisibilityConverter}}"
                                   MouseLeftButtonDown="UnequipSpell_Click"
                                   />
                       </Grid>
                   </Border>
               </DataTemplate>
           </ItemsControl.ItemTemplate>
       </ItemsControl>
        
       <ScrollViewer Grid.Row="1" Margin="10">
           <ItemsControl ItemsSource="{Binding AvailableSpells}">
               <ItemsControl.ItemsPanel>
                   <ItemsPanelTemplate>
                       <WrapPanel Orientation="Horizontal" />
                   </ItemsPanelTemplate>
               </ItemsControl.ItemsPanel>
               <ItemsControl.ItemTemplate>
                   <DataTemplate>
                       <Border BorderBrush="{Binding IsEquipped, Converter={StaticResource BoolToBorderBrushConverter}}"
                               BorderThickness="1"
                               Padding="8"
                               Background="Transparent"
                               MouseLeftButtonDown="Border_MouseLeftButtonDown"
                               Margin="2"
                               Height="60"
                               Width="80">
                           <TextBlock Text="{Binding Name}"
                                      HorizontalAlignment="Center"
                                      VerticalAlignment="Center"
                                      TextAlignment="Center"
                                      TextWrapping="Wrap" />
                       </Border>
                   </DataTemplate>
               </ItemsControl.ItemTemplate>
           </ItemsControl>
       </ScrollViewer>
   </Grid>
</Window>